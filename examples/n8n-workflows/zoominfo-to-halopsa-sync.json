{
  "name": "ZoomInfo to HaloPSA Sync",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 */15 * * * *"
            }
          ]
        }
      },
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [
        240,
        300
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.zoominfo.com/lookup/person",
        "headers": {
          "Authorization": "Bearer {{$env.ZOOMINFO_JWT_TOKEN}}",
          "Content-Type": "application/json"
        },
        "body": {
          "firstName": "John",
          "lastName": "Doe",
          "companyName": "Example Corp"
        }
      },
      "name": "ZoomInfo",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        460,
        300
      ]
    },
    {
      "parameters": {
        "functionCode": "const transformedContacts = items.map(item => {\n  const person = item.json.data?.[0];\n  return {\n    firstname: person.firstName,\n    surname: person.lastName,\n    emailaddress: person.email,\n    jobtitle: person.jobTitle,\n    phonenumber: person.phone,\n    organisation_name: person.companyName\n  };\n});\n\nreturn transformedContacts;"
      },
      "name": "Transform Data",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        680,
        300
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://{{$env.HALOPSA_TENANT}}.halopsa.com/api/Contact",
        "headers": {
          "Authorization": "Bearer {{$env.HALOPSA_ACCESS_TOKEN}}",
          "Content-Type": "application/json"
        }
      },
      "name": "HaloPSA",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        900,
        300
      ]
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "ZoomInfo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ZoomInfo": {
      "main": [
        [
          {
            "node": "Transform Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transform Data": {
      "main": [
        [
          {
            "node": "HaloPSA",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}